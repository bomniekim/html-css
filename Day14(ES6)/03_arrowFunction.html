<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Arrow Function</title>
</head>

<body>

    <script>
        // 화살표 함수(Arrow Function) : java의 람다식 표기법
        // 함수를 정의할 때 'function' 키워드를 사용하지 않고 '=>'로 대체

        // 1. 일반적인 함수 (함수 선언식)
        function show() {
            document.write('show<br>');
        }
        show();

        // 2. 익명함수 (함수 표현식)
        let output = function () {
            document.write('output<br>');
        }
        output();

        // 3. 익명함수를 화살표함수로 변경하여 사용할 수 있음
        let display = () => {
            document.write('arrow function<br>');
        }
        display();

        let display1 = (name) => {
            document.write(name + '<br>');
        }
        display1('Sonny');

        // 화살표함수 표기문법을 더 간결하게 줄여서 사용
        // 1) 파라미터가 1개일 때는 ()생략 가능 / 없거나 2개 이상이면 생략불가
        let display2 = name => {
            document.write(name + '<br>');
        }
        display2('Harry');

        // 2) {}안의 실행문이 1줄일 때는 {}도 생략가능
        let display3 = name => document.write(name + '<br>');
        display3('Dele');

        let display4 = () => document.write('COYS<br>');
        display4();

    </script>

    <!-- 화살표함수는 보통 이벤트 처리목적으로 많이 사용됨 -->
    <button id="btn1">original button</button>
    <button id="btn2">arrow function</button>
    <p id="p1"></p>
    <p id="p2"></p>
    <script>
        // 1. 버튼에 클릭이벤트 달기
        // 1) 예전방식
        let btn1 = document.getElementById('btn1');
        btn1.onclick = function () {
            document.getElementById('p1').innerHTML = "clicked!";
        }

        // 2) 화살표함수 사용
        btn2.onclick = () => document.getElementById('p1').innerHTML = "arrow clicked!";

        // 2. 반복문 처리에 특별하게 사용가능
        let arr = new Array(10, 20, 30);
        // css선택자 문법으로 요소 찾아오는 메소드
        document.querySelector('#p2').innerHTML = arr[0] + '<br>';

        // 반복문으로 배열 요소값들 출력
        for (let i = 0; i < arr.length; i++) {
            document.querySelector('#p2').innerHTML += arr[i] + '<br>';
        }

        // for..in문법 (차례로 index의 값 (연관배열이라면 키값) 얻어오기)
        for (index in arr) {
            document.querySelector('#p2').innerHTML += arr[index] + '<br>';
        }

        document.write('<hr>');

        // 배열객체의 forEach() 이용
        arr.forEach(function (value) {
            document.write(value + '<br>');
        });
        document.write('<hr>');

        // 이 때 사용된 콜백함수를 화살표함수로 변경
        arr.forEach((value) => { document.write(value + '<br>'); });
        arr.forEach(value => document.write(value + '<br>'));

        // * forEach()와 비슷한 map()
        // :요소의 개수만큼 반복하며 ()안의 파라미터로 전달된 함수를 호출해주는 방식은 똑같음
        // 각 콜백함수는 return을 가지고 있음
        // 결국 map()은 각 요소개수마다 return하고 그 결과를 새로운 배열로 리턴함
        let arr2 = arr.map(function (value) { return value + 1; });
        document.write(arr2 + '<br>'); // 배열 출력하면 자동으로 요소1, 요소2, 요소3,... // 11,21,31
        document.write('<hr>');

        // 위 map()을 화살표함수로 변경
        let arr3 = arr.map((value) => { return value + 1 });
        // 만약 실행문이 1줄일 때는 {}도 생략할 수 있으나 return 키워드도 생략해야만 함 (암묵적으로 return됨)
        let arr3 = arr.map(value => value + 1);
        document.write(arr3 + '<br>');

        // 나중에 하이브리드 앱 개발에서 더 많은 내용을 다뤄볼 것임!

        arr.forEach(value => value = 5);
        document.write(arr + "<br>");
    </script>

    <hr>
    <button id="btn3">button</button>
    <p id='p3'></p>
    <script>
        // 콜백함수를 익명함수로 작성
        btn3.onclick = function () {
            document.querySelector('#p3').innerHTML = this; // [object HTMLButtonElement]
        }

        // 콜백함수를 화살표함수로 작성
        btn3.onclick = () => {
            document.querySelector('#p3').innerHTML = this; //[object Window]
        }


    </script>




</body>

</html>